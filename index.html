<!DOCTYPE html>
<html>
    <head>
        <title>Etch-A-Sketch</title>
        <link href="css/style.css" rel="stylesheet" type="text/css">
    </head>
    <body>
        <div id="main">
            <h1>Etch-A-Sketch</h1>
            <div class="topButton">
                <button id="black">Black</button>
                <button id='color'>Color</button>
                <button id='shade'>Shader</button>
                <button id='eraser'>Eraser</button>
            </div>

            <div id="grid">
                    
            </div>

            <button class="trigger">Click here to trigger the modal!</button>
            <div class="modal">
                <div class="modal-content">
                    <span class="close-button">&times;</span>
                    <h1>Etch-A-Sketch</h1>
                </div>
            </div>




        </div>
               

        <script>
            let modal = document.querySelector(".modal");
            let trigger = document.querySelector(".trigger");
            let closeButton = document.querySelector(".close-button");
            let canvas = document.querySelector("#grid");
            let blackPen = document.querySelector('#black');
            let eraser = document.querySelector('#eraser');
            let colorPen = document.querySelector('#color');
            let shadePen = document.querySelector('#shade');
            let canvasBox = document.querySelectorAll(".box");




            function toggleModal() {
                modal.classList.toggle("show-modal");

            }

            function windowOnClick(event) {
                if (event.target === modal) {
                    toggleModal();
                    createCanvas(16);


                }
            }

            function closeAction(){
                toggleModal();
                createCanvas(16);
            }

            function canvasReset(){
                /*let canvasBox = canvas.querySelectorAll('.box');
                canvasBox.forEach((e)=>{
                    e.removechild();
                })*/
                canvas.innerHTML= " ";
            }


            function createCanvas(n) {
                canvasReset();
                let dimensions = (800/n) / 16;
                n = n**2;
                let i = 0;

                while(i < n){
                let div = document.createElement('div');
                div.classList.add("box");
                div.style.width =  dimensions + 'rem';
                div.style.height = dimensions + 'rem';
                canvas.append(div);
                i++
                }
            }

            function drawPen(e){
                if(e.target.id == 'black'){
                    canvas.addEventListener('mouseover', (e)=>{
                    e.target.style.backgroundColor = 'black';

                });
                }

                else if (e.target.id == 'color'){
                    canvas.addEventListener('mouseover', (e)=>{
                    e.target.style.backgroundColor = '#' + randomColors() + randomColors() + randomColors()});
                }

                else if (e.target.id == 'shade'){
                   
                }

                else{
                    e.target.style.backgroundColor = "black";

                }
            }

            
                

            function randomColors(){
                let colors = ['0','1','2','3','4','5','6','7','8','9','a','b','c','d','e','f'];
                let random = Math.floor(Math.random() * 16);
                let shade = colors[random];
                 
                
                return shade;
            }

            function erasePen (e){
                canvas.addEventListener('mouseover', (e)=>{
                    e.target.style.backgroundColor = 'white';
                })

            }

            
            



            window.onload = toggleModal();

            trigger.addEventListener("click", toggleModal);
            closeButton.addEventListener("click", closeAction);
            window.addEventListener("click", windowOnClick);

            canvas.addEventListener('mouseover', drawPen);
            blackPen.addEventListener('click', drawPen);
            eraser.addEventListener('click', erasePen);
            shadePen.addEventListener('click', drawPen);
            colorPen.addEventListener('click', drawPen);
                     

        </script>

    </body>
</html>